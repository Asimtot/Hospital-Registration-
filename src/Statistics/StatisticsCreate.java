/**
 *  @author Efe Can Tepe
 *  It is a pop up frame for user to interact which graph he wants to use
 */

package Statistics;


import java.awt.event.*;
import java.sql.SQLException;
import javax.swing.*;

/**
 *
 *  @author Efe Can Tepe
 */
public class StatisticsCreate extends javax.swing.JFrame implements WindowListener{

    static int count = 0;

    ButtonGroup groupChart;
    ButtonGroup dimensionChart;
    StatisticsTab stat;

    /*
        Constructor takes the stat as a parameter since we need to add
        panels into JTabbedPane
    */
    public StatisticsCreate(StatisticsTab stat){

        this.stat = stat;

        initComponents();
        setVisible(true);

        groupChart = new ButtonGroup();
        dimensionChart = new ButtonGroup();

        groupChart.add(pieChartRadioButton);
        groupChart.add(barChartRadioButton);

        dimensionChart.add(twoDRadio);

        pieChartRadioButton.setSelected(true);
        twoDRadio.setSelected(true);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        pieChartRadioButton = new javax.swing.JRadioButton();
        barChartRadioButton = new javax.swing.JRadioButton();
        twoDRadio = new javax.swing.JRadioButton();
        createButton = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jComboBox1 = new javax.swing.JComboBox<>();

        jComboBox1.setEnabled(true);

        jComboBox1.addActionListener(new ComboBoxListener());
        jComboBox1.addMouseListener(new ComboBoxListener());

        jLabel2 = new javax.swing.JLabel();
        jComboBox2 = new javax.swing.JComboBox<>();

        jComboBox2.setEnabled(true);

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        pieChartRadioButton.setText("Pie Chart");
        pieChartRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                pieChartRadioButtonActionPerformed(evt);
            }
        });

        barChartRadioButton.setText("Bar Chart");
        barChartRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                barChartRadioButtonActionPerformed(evt);
            }
        });



        twoDRadio.setText("2D Chart");


        createButton.setText("Create");
        createButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                createButtonMouseEntered(evt);
            }
        });
        createButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                try {
                    createButtonActionPerformed(evt);
                } catch (SQLException throwables) {
                    throwables.printStackTrace();
                }
            }
        });

        jLabel1.setText("Compared Item");

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Hospital"}));


        jLabel2.setText("Compared By");

        jComboBox2.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "", ""}));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                                .addComponent(createButton))
                                        .addGroup(layout.createSequentialGroup()
                                                .addGap(69, 69, 69)
                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                        .addGroup(layout.createSequentialGroup()
                                                                .addComponent(pieChartRadioButton)
                                                                .addGap(18, 18, 18)
                                                                .addComponent(barChartRadioButton))
                                                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 86, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                                                .addComponent(jComboBox1, javax.swing.GroupLayout.Alignment.LEADING, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                                                .addComponent(twoDRadio, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                                                .addGap(18, 18, 18)
                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 86, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                                                .addComponent(jComboBox2, javax.swing.GroupLayout.Alignment.LEADING, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                                                ))
                                                .addGap(0, 59, Short.MAX_VALUE)))
                                .addContainerGap())
        );
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(pieChartRadioButton)
                                        .addComponent(barChartRadioButton)
                                        )
                                .addGap(67, 67, 67)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(jComboBox2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 63, Short.MAX_VALUE)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(twoDRadio)
                                        )
                                .addGap(23, 23, 23)
                                .addComponent(createButton)
                                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    private void pieChartRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
    }

    private void barChartRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
    }


    private void createButtonMouseEntered(java.awt.event.MouseEvent evt) {
        // TODO add your handling code here:
    }

    private void createButtonActionPerformed(java.awt.event.ActionEvent evt) throws SQLException {

        JPanel holderPanel = new JPanel();

        if(pieChartRadioButton.isSelected()){

            PieChart pieChart = new PieChart((String)jComboBox1.getSelectedItem(), (String)jComboBox2.getSelectedItem());

            holderPanel = pieChart.createDemoPanel();
        }

        else if(barChartRadioButton.isSelected()){

            BarChart a = new BarChart( (String)jComboBox1.getSelectedItem(), (String)jComboBox2.getSelectedItem() );

            holderPanel = a.createDemoPanel();
        }

        holderPanel.setSize(stat.getWidth(),stat.getHeight());

        stat.getFirstTab().addTab("tab" + (count), holderPanel);

        count++;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(StatisticsCreate.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(StatisticsCreate.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(StatisticsCreate.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(StatisticsCreate.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                //new StatisticsCreate().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify
    private javax.swing.JRadioButton barChartRadioButton;
    private javax.swing.JButton createButton;
    private javax.swing.JComboBox<String> jComboBox1;
    private javax.swing.JComboBox<String> jComboBox2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JRadioButton pieChartRadioButton;
    private javax.swing.JRadioButton twoDRadio;
    // End of variables declaration

    @Override
    public void windowOpened(WindowEvent e) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public void windowClosing(WindowEvent e) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public void windowClosed(WindowEvent e) {
        stat.setEnabled(true);
    }

    @Override
    public void windowIconified(WindowEvent e) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public void windowDeiconified(WindowEvent e) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public void windowActivated(WindowEvent e) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public void windowDeactivated(WindowEvent e) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    private class ComboBoxListener implements ActionListener, MouseListener {

        @Override
        public void actionPerformed(ActionEvent e){

            JComboBox holder = (JComboBox)e.getSource();

            if(holder.getSelectedItem().toString().equals("Hospital")){
                setComboBox2(("Hospital"));
            }

        }

        @Override
        public void mouseClicked(MouseEvent e) {
            JComboBox holder = (JComboBox)e.getSource();

            System.out.println(jComboBox1.getSelectedItem());

            if(jComboBox1.getSelectedItem().equals("Hospital")){
                setComboBox2(("Hospital"));
            }

            if(jComboBox1.getSelectedItem().equals("Patient")){
                System.out.println("Patient Happened");
                setComboBox2(("Patient"));
            }

            if(jComboBox1.getSelectedItem().equals("Prescription")){
                System.out.println("Prescription Happened");
                setComboBox2(("Prescription"));
            }

            if(jComboBox1.getSelectedItem().equals("Body Part")){
                System.out.println("Body Happened");
                setComboBox2(("Body Part"));
            }
        }

        @Override
        public void mousePressed(MouseEvent e) {

        }

        @Override
        public void mouseReleased(MouseEvent e) {

        }

        @Override
        public void mouseEntered(MouseEvent e) {

        }

        @Override
        public void mouseExited(MouseEvent e) {

        }
    }

    public void setComboBox2(String word){

        if("Hospital".equals(word)){
            DefaultComboBoxModel<String> model = new DefaultComboBoxModel<>(new String [] {"Icu Capacity", "Currently in hospital", "Number of Doctors"});
            jComboBox2.setModel(model);
        }

    }

    private void itemStateChanged(java.awt.event.ItemEvent itemEvent){

        if(jComboBox1.getSelectedItem().equals("Hospital")){
            setComboBox2(("Hospital"));
        }

    }
}

